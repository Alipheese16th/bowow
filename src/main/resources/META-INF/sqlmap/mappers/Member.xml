<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lec.bowow.dao.MemberDao">

	<resultMap type="Member" id="MemberResult">
		<result property="memberId" column="memberId"/>
		<result property="memberPw" column="memberPw"/>
		<result property="memberName" column="memberName"/>
		<result property="memberEmail" column="memberEmail"/>
		<result property="memberTel" column="memberTel"/>
		<result property="memberPost" column="memberPost"/>
		<result property="memberAddr1" column="memberAddr1"/>
		<result property="memberAddr2" column="memberAddr2"/>
		<result property="memberBirth" column="memberBirth"/>
		<result property="memberAmount" column="memberAmount"/>
		<result property="memberPoint" column="memberPoint"/>
		<result property="gradeno" column="gradeno"/>
	</resultMap>
	
	<select id="memberIdConfirm" parameterType="String" resultType="int">
		SELECT COUNT(*) FROM MEMBER WHERE MEMBERID = #{memberId, jdbcType=VARCHAR}
	</select>
	<select id="memberMailConfirm">
		SELECT COUNT(*) FROM MEMBER WHERE MEMBEREMAIL = #{memberEmail}
	</select>
	<insert id="joinMember" parameterType="Member">
		INSERT INTO MEMBER (MEMBERID, MEMBERPW, MEMBERNAME, MEMBEREMAIL, MEMBERTEL, MEMBERPOST, MEMBERADDR1, MEMBERADDR2, MEMBERBIRTH)
    		VALUES (#{memberId}, #{memberPw}, #{memberName}, #{memberEmail}, #{memberTel}, #{memberPost}, #{memberAddr1}, #{memberAddr2}, #{memberBirth})
	</insert>
	<select id="searchIdMember" parameterType="String" resultType="String">
		SELECT MEMBERID FROM MEMBER WHERE MEMBERTEL = #{memberTel}
	</select>
	<select id="searchPwMember" parameterType="String" resultType="String">
		SELECT MEMBERPW FROM MEMBER WHERE MEMBERID = #{memberId}
	</select>
	<select id="getDetailMember" parameterType="String" resultType="Member">
		SELECT * FROM MEMBER WHERE MEMBERID = #{memberId}
	</select>
	<update id="modifyMember" parameterType="Member">
		UPDATE MEMBER SET 
	        MEMBERPW = #{memberPw},
	        MEMBERNAME = #{memberName},
	        MEMBEREMAIL = #{memberEmail},
	        MEMBERTEL = #{memberTel},
	        MEMBERPOST = #{memberPost}, 
	        MEMBERADDR1 = #{memberAddr1},
	        MEMBERADDR2 = #{memberAddr2},
	        MEMBERBIRTH = #{memberBirth}
    	WHERE MEMBERID = #{memberId}
	</update>
	<delete id="deleteMember" parameterType="String">
		DELETE FROM MEMBER WHERE MEMBERID = #{memberId}
	</delete>
</mapper>
